<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ò–Ω—Ç–µ—Ä–ø–æ–ª—è—Ç–æ—Ä –ü–ó–£</title>
    <style>
        :root { --blue: #2980b9; --bg: #f4f7f6; --text: #2c3e50; --accent: #fab005; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: var(--bg); padding: 15px; color: var(--text); line-height: 1.4; }
        .container { max-width: 650px; margin: auto; }
        
        .calc-card { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 8px 20px rgba(0,0,0,0.08); margin-bottom: 15px; border-top: 4px solid var(--blue); }
        h2 { margin: 0 0 15px 0; font-size: 18px; color: var(--blue); }
        
        .input-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: 600; font-size: 12px; color: #7f8c8d; text-transform: uppercase; }
        select, input { width: 100%; padding: 10px; border: 2px solid #dfe6e9; border-radius: 8px; box-sizing: border-box; font-size: 15px; }
        
        .result-box { background: #e8f4fd; border-radius: 10px; padding: 15px; text-align: center; border: 1px solid #d1e9f9; }
        .result-value { font-size: 32px; font-weight: 800; color: var(--blue); }

        .formula-section { background: #fff; padding: 15px; border-radius: 12px; margin-bottom: 15px; border: 1px solid #eee; }
        .math-display { font-family: "Cambria Math", "Times New Roman", serif; font-size: 17px; text-align: center; padding: 10px; background: #f9f9f9; border-radius: 6px; }
        .highlight { color: var(--blue); font-weight: bold; border-bottom: 1px solid var(--blue); }

        table { width: 100%; border-collapse: collapse; background: white; border-radius: 8px; overflow: hidden; font-size: 13px; }
        th { background: #f8f9fa; padding: 10px; text-align: center; border-bottom: 2px solid #eee; }
        td { padding: 10px; text-align: center; border-bottom: 1px solid #f1f1f1; }
        .active-row { background: #fff9db !important; font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <div class="calc-card">
        <h2>üìê –õ–∏–Ω–µ–π–Ω–∞—è –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è –ü–ó–£</h2>
        
        <div class="input-group">
            <label>–ü–∞—Ä–∞–º–µ—Ç—Ä (–°–∞–Ω–ü–∏–ù):</label>
            <select id="dataType" onchange="calculate()">
                <option value="pzu_facade">–°—Ç–æ—è–Ω–∫–∞ ‚Äî –§–∞—Å–∞–¥ –∂–∏–ª–æ–≥–æ –¥–æ–º–∞</option>
                <option value="pzu_children">–°—Ç–æ—è–Ω–∫–∞ ‚Äî –î–µ—Ç—Å–∫–∞—è –ø–ª–æ—â–∞–¥–∫–∞ (–î–ü)</option>
            </select>
        </div>

        <div class="input-group">
            <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º/–º–µ—Å—Ç (x‚ÇÅ):</label>
            <input type="number" id="x1" value="35" oninput="calculate()">
        </div>

        <div class="result-box">
            <div class="result-label">–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ (f‚ÇÅ), –º:</div>
            <div id="res_f1" class="result-value">0.00</div>
        </div>
    </div>

    <div class="formula-section">
        <label>–ü—Ä–∏–º–µ–Ω–µ–Ω–Ω–∞—è —Ñ–æ—Ä–º—É–ª–∞:</label>
        <div class="math-display">
            f(x‚ÇÅ) = f‚ÇÄ + (f‚ÇÇ - f‚ÇÄ) * (x‚ÇÅ - x‚ÇÄ) / (x‚ÇÇ - x‚ÇÄ)
        </div>
        <div id="formula_live" class="math-display" style="margin-top:10px; color: var(--blue);">
            </div>
    </div>

    <table id="rangeTable">
        <thead>
            <tr>
                <th>x‚ÇÄ (–æ—Ç)</th>
                <th>x‚ÇÇ (–¥–æ)</th>
                <th>f‚ÇÄ (–º)</th>
                <th>f‚ÇÇ (–º)</th>
            </tr>
        </thead>
        <tbody id="tableBody"></tbody>
    </table>
</div>

<script>
const dataTables = {
    pzu_facade: [
        {x0: 10, x2: 50,  f0: 10, f2: 15},
        {x0: 50, x2: 100, f0: 15, f2: 25},
        {x0: 100,x2: 300, f0: 25, f2: 35}
    ],
    pzu_children: [
        {x0: 10, x2: 50,  f0: 25, f2: 50},
        {x0: 50, x2: 100, f0: 50, f2: 50},
        {x0: 100,x2: 300, f0: 50, f2: 50}
    ]
};

function calculate() {
    const type = document.getElementById('dataType').value;
    const x1 = parseFloat(document.getElementById('x1').value) || 0;
    const table = dataTables[type];
    
    let result = 0;
    let activeIndex = -1;

    // –ü–æ–∏—Å–∫ –¥–∏–∞–ø–∞–∑–æ–Ω–∞
    const range = table.find((r, index) => {
        if (x1 >= r.x0 && x1 <= r.x2) {
            activeIndex = index;
            return true;
        }
    });

    updateTable(table, activeIndex);

    if (range) {
        // –ö–õ–ê–°–°–ò–ß–ï–°–ö–ê–Ø –§–û–†–ú–£–õ–ê
        result = range.f0 + (range.f2 - range.f0) * (x1 - range.x0) / (range.x2 - range.x0);
        
        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∂–∏–≤—ã—Ö —Ü–∏—Ñ—Ä
        document.getElementById('formula_live').innerHTML = 
            `${range.f0} + (${range.f2} - ${range.f0}) * (<span class="highlight">${x1}</span> - ${range.x0}) / (${range.x2} - ${range.x0}) = <span class="highlight">${result.toFixed(2)}</span>`;
    } else {
        document.getElementById('formula_live').innerText = "–ó–Ω–∞—á–µ–Ω–∏–µ –≤–Ω–µ –¥–∏–∞–ø–∞–∑–æ–Ω–∞";
        result = x1 < table[0].x0 ? table[0].f0 : table[table.length-1].f2;
    }

    document.getElementById('res_f1').innerText = result.toFixed(2);
}

function updateTable(table, activeIndex) {
    const tbody = document.getElementById('tableBody');
    tbody.innerHTML = "";
    table.forEach((row, index) => {
        const tr = document.createElement('tr');
        if (index === activeIndex) tr.className = "active-row";
        tr.innerHTML = `<td>${row.x0}</td><td>${row.x2}</td><td>${row.f0}</td><td>${row.f2}</td>`;
        tbody.appendChild(tr);
    });
}

calculate();
</script>

</body>
</html>